!function(){var t;function e(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),n=0;n<e.length;n+=2){const t=Math.PI*n/this.size;e[n]=Math.cos(t),e[n+1]=-Math.sin(t)}this.table=e;for(var r=0,o=1;this.size>o;o<<=1)r++;this._width=r%2==0?r-1:r,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var a=0;a<this._width;a+=2){var s=this._width-a-2;this._bitrev[i]|=(i>>>a&3)<<s}}this._out=null,this._data=null,this._inv=0}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t=e,e.prototype.fromComplexArray=function(t,e){for(var n=e||new Array(t.length>>>1),r=0;r<t.length;r+=2)n[r>>>1]=t[r];return n},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var n=e||this.createComplexArray(),r=0;r<n.length;r+=2)n[r]=t[r>>>1],n[r+1]=0;return n},e.prototype.completeSpectrum=function(t){for(var e=this._csize,n=e>>>1,r=2;r<n;r+=2)t[e-r]=t[r],t[e-r+1]=-t[r+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var n=0;n<t.length;n++)t[n]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,n=this._out,r=this._csize,o=1<<this._width,i=r/o<<1,a=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleTransform2(t,n,o)}else for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleTransform4(t,n,o)}var s=this._inv?-1:1,h=this.table;for(o>>=2;o>=2;o>>=2){var l=(i=r/o<<1)>>>2;for(t=0;t<r;t+=i)for(var u=t+l,f=t,c=0;f<u;f+=2,c+=o){const t=f,e=t+l,r=e+l,o=r+l,i=n[t],a=n[t+1],u=n[e],v=n[e+1],m=n[r],d=n[r+1],p=n[o],g=n[o+1],y=i,_=a,w=h[c],b=s*h[c+1],x=u*w-v*b,A=u*b+v*w,k=h[2*c],M=s*h[2*c+1],T=m*k-d*M,I=m*M+d*k,S=h[3*c],E=s*h[3*c+1],z=p*S-g*E,P=p*E+g*S,N=y+T,C=_+I,R=y-T,B=_-I,q=x+z,L=A+P,X=s*(x-z),j=s*(A-P),D=N+q,Y=C+L,F=N-q,O=C-L,H=R+j,U=B-X,W=R-j,G=B+X;n[t]=D,n[t+1]=Y,n[e]=H,n[e+1]=U,n[r]=F,n[r+1]=O,n[o]=W,n[o+1]=G}}},e.prototype._singleTransform2=function(t,e,n){const r=this._out,o=this._data,i=o[e],a=o[e+1],s=o[e+n],h=o[e+n+1],l=i+s,u=a+h,f=i-s,c=a-h;r[t]=l,r[t+1]=u,r[t+2]=f,r[t+3]=c},e.prototype._singleTransform4=function(t,e,n){const r=this._out,o=this._data,i=this._inv?-1:1,a=2*n,s=3*n,h=o[e],l=o[e+1],u=o[e+n],f=o[e+n+1],c=o[e+a],v=o[e+a+1],m=o[e+s],d=o[e+s+1],p=h+c,g=l+v,y=h-c,_=l-v,w=u+m,b=f+d,x=i*(u-m),A=i*(f-d),k=p+w,M=g+b,T=y+A,I=_-x,S=p-w,E=g-b,z=y-A,P=_+x;r[t]=k,r[t+1]=M,r[t+2]=T,r[t+3]=I,r[t+4]=S,r[t+5]=E,r[t+6]=z,r[t+7]=P},e.prototype._realTransform4=function(){var t,e,n=this._out,r=this._csize,o=1<<this._width,i=r/o<<1,a=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleRealTransform2(t,n>>>1,o>>>1)}else for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleRealTransform4(t,n>>>1,o>>>1)}var s=this._inv?-1:1,h=this.table;for(o>>=2;o>=2;o>>=2){var l=(i=r/o<<1)>>>1,u=l>>>1,f=u>>>1;for(t=0;t<r;t+=i)for(var c=0,v=0;c<=f;c+=2,v+=o){var m=t+c,d=m+u,p=d+u,g=p+u,y=n[m],_=n[m+1],w=n[d],b=n[d+1],x=n[p],A=n[p+1],k=n[g],M=n[g+1],T=y,I=_,S=h[v],E=s*h[v+1],z=w*S-b*E,P=w*E+b*S,N=h[2*v],C=s*h[2*v+1],R=x*N-A*C,B=x*C+A*N,q=h[3*v],L=s*h[3*v+1],X=k*q-M*L,j=k*L+M*q,D=T+R,Y=I+B,F=T-R,O=I-B,H=z+X,U=P+j,W=s*(z-X),G=s*(P-j),$=D+H,J=Y+U,K=F+G,Q=O-W;if(n[m]=$,n[m+1]=J,n[d]=K,n[d+1]=Q,0!==c){if(c!==f){var V=F+-s*G,Z=-O+-s*W,tt=D+-s*H,et=-Y- -s*U,nt=t+u-c,rt=t+l-c;n[nt]=V,n[nt+1]=Z,n[rt]=tt,n[rt+1]=et}}else{var ot=D-H,it=Y-U;n[p]=ot,n[p+1]=it}}}},e.prototype._singleRealTransform2=function(t,e,n){const r=this._out,o=this._data,i=o[e],a=o[e+n],s=i+a,h=i-a;r[t]=s,r[t+1]=0,r[t+2]=h,r[t+3]=0},e.prototype._singleRealTransform4=function(t,e,n){const r=this._out,o=this._data,i=this._inv?-1:1,a=2*n,s=3*n,h=o[e],l=o[e+n],u=o[e+a],f=o[e+s],c=h+u,v=h-u,m=l+f,d=i*(l-f),p=c+m,g=v,y=-d,_=c-m,w=v,b=d;r[t]=p,r[t+1]=0,r[t+2]=g,r[t+3]=y,r[t+4]=_,r[t+5]=0,r[t+6]=w,r[t+7]=b};var o,i,a,s=document.getElementById("canvas"),h=s.getContext("2d"),l=new Array,u=0,f=new Path2D,c=(o=t)&&o.__esModule?o.default:o,v=4,m=new c(v),d=new Array,p=new Array,g=0,y=0,_=!1,w=!1,b=!0,x=document.getElementById("parameter-slider");g=x.valueAsNumber,x.oninput=function(){g=x.valueAsNumber,R()};var A=document.getElementById("complexity-number");y=A.valueAsNumber,A.oninput=function(){y=A.valueAsNumber,R()};var k,M=document.getElementById("complexity-circles-check");function T(){s.width=window.devicePixelRatio*s.clientWidth,s.height=window.devicePixelRatio*s.clientHeight}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=v-1,n=Math.min(g,e),r=Math.min(y,e);S(),b?R(r,n,window.performance.now(),t):R(r,n)}function S(){m=new c(v),i=m.createComplexArray(),a=m.createComplexArray(),l.splice(0,l.length),u=0,f=new Path2D,d.splice(0,d.length),null==p||p.forEach((function(t){return P(t.x,t.y,!1)}))}function E(t,e){return Math.sqrt(t*t+e*e)}function z(t,e,n){return t+(e-t)*n}function P(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===l.length)l.push({x:t,y:e,segmentLength:0});else{var r=l[Math.max(0,l.length-2)],o=E(t-r.x,e-r.y);u+=o;var s={x:t,y:e,segmentLength:o};l.splice(l.length-1,0,s);var h=l[l.length-1];h.segmentLength=E(h.x-t,h.y-e)}f.lineTo(t,e),u>0?(N(),m.transform(a,i),C()):d.splice(0,d.length),n&&R()}function N(){for(var t=l[l.length-1],e=u+t.segmentLength,n=0,r=t,o=0,a=0;a<l.length;a++){var s=l[a];n+=s.segmentLength;for(var h=Math.round(v*n/e),f=h-o+1,c=o;c<h;c++){var m=(c-o)/f;i[2*c]=z(r.x,s.x,m),i[2*c+1]=z(r.y,s.y,m)}r=s,o=h}}function C(){d.splice(0,d.length);for(var t=0;t<v;t++){var e=a[2*t],n=a[2*t+1];d.push({frequency:t<v/2?t:t-v,magnitude:E(e,n)/v,phase:Math.atan2(n,e)})}d.sort((function(t,e){return e.magnitude-t.magnitude}))}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h.setTransform(window.devicePixelRatio,0,0,window.devicePixelRatio,0,0),h.clearRect(0,0,s.clientWidth,s.clientHeight);var o=new Path2D(f);if(o.closePath(),h.strokeStyle="black",h.stroke(o),d.length>0){var i=Math.min(d.length,t<=0?d.length:t+1),a=2*Math.PI,l=e*a/v,u=0,c=0;if(_){var m=new Array;h.beginPath();for(var w=0;w<i;w++){var b=d[w],k=l*b.frequency+b.phase,T=u+b.magnitude*Math.cos(k),S=c+b.magnitude*Math.sin(k);if(w>=1){var E=Math.sqrt(Math.pow(T-u,2)+Math.pow(S-c,2));h.moveTo(u,c),h.arc(u,c,E,0,a)}else m.splice(0,m.length);m.push({x:T,y:S}),u=T,c=S}h.strokeStyle="burlywood",h.stroke(),h.beginPath(),h.moveTo(m[0].x,m[0].y);for(var z=1;z<m.length;z++)h.lineTo(m[z].x,m[z].y);h.strokeStyle="red",h.stroke(),m.splice(0,m.length)}else h.beginPath(),B(i,l),h.strokeStyle="red",h.stroke();if(t>0){h.beginPath();for(var P=0;P<v;P++)q(i,P*a/v);q(i,0),h.strokeStyle="green",h.stroke()}}if(void 0!==n){var N=window.performance.now(),C=(N-n)*(p.length+1)*2;if(C<25&&r<10&&v<Number.MAX_SAFE_INTEGER/4)v*=2,I(r+1);else if(C>100&&r<10&&v>4)v/=2,I(r+1);else{var R=v-1,L=Math.min(g,R),X=Math.min(y,R);x.max=R.toString(),g=L,x.value=g.toString(),A.max=R.toString(),y=X,A.value=y.toString(),M.checked=_}}}function B(t,e){for(var n=0,r=0,o=0;o<t;o++){var i=d[o],a=e*i.frequency+i.phase;n+=i.magnitude*Math.cos(a),r+=i.magnitude*Math.sin(a),h.lineTo(n,r)}}function q(t,e){for(var n=0,r=0,o=0;o<t;o++){var i=d[o],a=e*i.frequency+i.phase;n+=i.magnitude*Math.cos(a),r+=i.magnitude*Math.sin(a)}h.lineTo(n,r)}_=M.checked,M.oninput=function(){_=M.checked,R()},window.addEventListener("resize",(function(){T(),R()})),T(),null===(k=window.location.search)||void 0===k||k.substr(1).split("&").forEach((function(t){switch(t){case"circles":M.checked=!0;break;case"autofft":b=!0;break;default:var e=n(t.split("="),2),r=e[0],o=e[1];if(null!==o){var i=o&&decodeURIComponent(o);switch(r){case"pt":var a=n(i.split(";"),2),s=a[0],h=a[1];null!==s&&null!==h&&p.push({x:Number(s),y:Number(h)});break;case"range":g=Number(i);break;case"circles":_=Boolean(Number(i));break;case"complexity":y=Number(i);break;case"fftsize":b=!1,v=Number(i);break;case"autofft":b=Boolean(Number(i))}}}})),I(),s.onpointerdown=function(t){0===t.button&&(w=!0,s.setPointerCapture(t.pointerId),p.push({x:t.offsetX,y:t.offsetY}),P(t.offsetX,t.offsetY))},s.ontouchstart=s.ontouchmove=function(t){1===t.touches.length&&t.preventDefault()},s.onpointermove=function(t){w&&(p.push({x:t.offsetX,y:t.offsetY}),P(t.offsetX,t.offsetY))},s.onpointerup=function(t){w&&(w=!1,s.releasePointerCapture(t.pointerId))},document.getElementById("clear-button").onclick=function(){null==p||p.splice(p.length),R()},document.getElementById("save-button").onclick=function(){var t="";if(l.length>0)for(var e=-1;e<l.length-1;e++){var n=l[(e+l.length)%l.length];t+="&pt=".concat(n.x,";").concat(n.y)}var r=window.location.pathname+"?range="+g+"&complexity="+y+"&circles="+Number(_)+t;history.pushState(null,"",r)}}();
//# sourceMappingURL=index.4b0c7342.js.map
