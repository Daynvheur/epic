!function(){var t;function e(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),n=0;n<e.length;n+=2){const t=Math.PI*n/this.size;e[n]=Math.cos(t),e[n+1]=-Math.sin(t)}this.table=e;for(var r=0,o=1;this.size>o;o<<=1)r++;this._width=r%2==0?r-1:r,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var a=0;a<this._width;a+=2){var s=this._width-a-2;this._bitrev[i]|=(i>>>a&3)<<s}}this._out=null,this._data=null,this._inv=0}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t=e,e.prototype.fromComplexArray=function(t,e){for(var n=e||new Array(t.length>>>1),r=0;r<t.length;r+=2)n[r>>>1]=t[r];return n},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var n=e||this.createComplexArray(),r=0;r<n.length;r+=2)n[r]=t[r>>>1],n[r+1]=0;return n},e.prototype.completeSpectrum=function(t){for(var e=this._csize,n=e>>>1,r=2;r<n;r+=2)t[e-r]=t[r],t[e-r+1]=-t[r+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var n=0;n<t.length;n++)t[n]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,n=this._out,r=this._csize,o=1<<this._width,i=r/o<<1,a=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleTransform2(t,n,o)}else for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleTransform4(t,n,o)}var s=this._inv?-1:1,h=this.table;for(o>>=2;o>=2;o>>=2){var u=(i=r/o<<1)>>>2;for(t=0;t<r;t+=i)for(var l=t+u,c=t,f=0;c<l;c+=2,f+=o){const t=c,e=t+u,r=e+u,o=r+u,i=n[t],a=n[t+1],l=n[e],m=n[e+1],p=n[r],v=n[r+1],d=n[o],g=n[o+1],y=i,_=a,w=h[f],b=s*h[f+1],x=l*w-m*b,A=l*b+m*w,T=h[2*f],k=s*h[2*f+1],M=p*T-v*k,I=p*k+v*T,P=h[3*f],z=s*h[3*f+1],S=d*P-g*z,E=d*z+g*P,C=y+M,R=_+I,L=y-M,N=_-I,B=x+S,q=A+E,j=s*(x-S),D=s*(A-E),O=C+B,U=R+q,X=C-B,Y=R-q,F=L+D,H=N-j,W=L-D,$=N+j;n[t]=O,n[t+1]=U,n[e]=F,n[e+1]=H,n[r]=X,n[r+1]=Y,n[o]=W,n[o+1]=$}}},e.prototype._singleTransform2=function(t,e,n){const r=this._out,o=this._data,i=o[e],a=o[e+1],s=o[e+n],h=o[e+n+1],u=i+s,l=a+h,c=i-s,f=a-h;r[t]=u,r[t+1]=l,r[t+2]=c,r[t+3]=f},e.prototype._singleTransform4=function(t,e,n){const r=this._out,o=this._data,i=this._inv?-1:1,a=2*n,s=3*n,h=o[e],u=o[e+1],l=o[e+n],c=o[e+n+1],f=o[e+a],m=o[e+a+1],p=o[e+s],v=o[e+s+1],d=h+f,g=u+m,y=h-f,_=u-m,w=l+p,b=c+v,x=i*(l-p),A=i*(c-v),T=d+w,k=g+b,M=y+A,I=_-x,P=d-w,z=g-b,S=y-A,E=_+x;r[t]=T,r[t+1]=k,r[t+2]=M,r[t+3]=I,r[t+4]=P,r[t+5]=z,r[t+6]=S,r[t+7]=E},e.prototype._realTransform4=function(){var t,e,n=this._out,r=this._csize,o=1<<this._width,i=r/o<<1,a=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleRealTransform2(t,n>>>1,o>>>1)}else for(t=0,e=0;t<r;t+=i,e++){const n=a[e];this._singleRealTransform4(t,n>>>1,o>>>1)}var s=this._inv?-1:1,h=this.table;for(o>>=2;o>=2;o>>=2){var u=(i=r/o<<1)>>>1,l=u>>>1,c=l>>>1;for(t=0;t<r;t+=i)for(var f=0,m=0;f<=c;f+=2,m+=o){var p=t+f,v=p+l,d=v+l,g=d+l,y=n[p],_=n[p+1],w=n[v],b=n[v+1],x=n[d],A=n[d+1],T=n[g],k=n[g+1],M=y,I=_,P=h[m],z=s*h[m+1],S=w*P-b*z,E=w*z+b*P,C=h[2*m],R=s*h[2*m+1],L=x*C-A*R,N=x*R+A*C,B=h[3*m],q=s*h[3*m+1],j=T*B-k*q,D=T*q+k*B,O=M+L,U=I+N,X=M-L,Y=I-N,F=S+j,H=E+D,W=s*(S-j),$=s*(E-D),G=O+F,J=U+H,K=X+$,Q=Y-W;if(n[p]=G,n[p+1]=J,n[v]=K,n[v+1]=Q,0!==f){if(f!==c){var V=X+-s*$,Z=-Y+-s*W,tt=O+-s*F,et=-U- -s*H,nt=t+l-f,rt=t+u-f;n[nt]=V,n[nt+1]=Z,n[rt]=tt,n[rt+1]=et}}else{var ot=O-F,it=U-H;n[d]=ot,n[d+1]=it}}}},e.prototype._singleRealTransform2=function(t,e,n){const r=this._out,o=this._data,i=o[e],a=o[e+n],s=i+a,h=i-a;r[t]=s,r[t+1]=0,r[t+2]=h,r[t+3]=0},e.prototype._singleRealTransform4=function(t,e,n){const r=this._out,o=this._data,i=this._inv?-1:1,a=2*n,s=3*n,h=o[e],u=o[e+n],l=o[e+a],c=o[e+s],f=h+l,m=h-l,p=u+c,v=i*(u-c),d=f+p,g=m,y=-v,_=f-p,w=m,b=v;r[t]=d,r[t+1]=0,r[t+2]=g,r[t+3]=y,r[t+4]=_,r[t+5]=0,r[t+6]=w,r[t+7]=b};var o,i=document.getElementById("canvas"),a=i.getContext("2d"),s=new Array,h=0,u=new Path2D,l=4096,c=(o=t)&&o.__esModule?o.default:o,f=new c(l),m=f.createComplexArray(),p=f.createComplexArray(),v=new Array,d=new Array,g=0,y=0,_=!1,w=!1,b=document.getElementById("parameter-slider");b.oninput=function(){g=b.valueAsNumber,E()};var x=document.getElementById("complexity-number");x.oninput=function(){y=x.valueAsNumber,E()};var A,T=document.getElementById("complexity-circles-check");function k(){i.width=window.devicePixelRatio*i.clientWidth,i.height=window.devicePixelRatio*i.clientHeight}function M(t,e){return Math.sqrt(t*t+e*e)}function I(t,e,n){return t+(e-t)*n}function P(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===s.length)s.push({x:t,y:e,segmentLength:0}),s.push({x:t,y:e,segmentLength:0});else{var r=s[s.length-2],o=M(t-r.x,e-r.y);h+=o,s[s.length-1]={x:t,y:e,segmentLength:o};var i=s[0];s.push({x:i.x,y:i.y,segmentLength:M(i.x-t,i.y-e)})}u.lineTo(t,e),h>0?(z(),f.transform(p,m),S()):v.splice(0,v.length),n&&E()}function z(){for(var t=0,e=s[0],n=0,r=h+s[s.length-1].segmentLength,o=1;o<s.length;o++){var i=s[o];t+=i.segmentLength;for(var a=Math.round(l*t/r),u=a-n+1,c=n;c<a;c++){var f=(c-n)/u;m[2*c]=I(e.x,i.x,f),m[2*c+1]=I(e.y,i.y,f)}e=i,n=a}}function S(){v.splice(0,v.length);for(var t=0;t<l;t++){var e=p[2*t],n=p[2*t+1];v.push({frequency:t<l/2?t:t-l,magnitude:M(e,n)/l,phase:Math.atan2(n,e)})}v.sort((function(t,e){return e.magnitude-t.magnitude}))}function E(){a.setTransform(window.devicePixelRatio,0,0,window.devicePixelRatio,0,0),a.clearRect(0,0,i.clientWidth,i.clientHeight);var t=new Path2D(u);if(t.closePath(),a.strokeStyle="black",a.stroke(t),v.length>0){var e=Math.min(v.length,y<=0?v.length:y+1),n=2*Math.PI,r=g*n/l,o=0,s=0;if(_){a.beginPath();for(var h=0;h<e;h++){var c=v[h],f=r*c.frequency+c.phase,m=o+c.magnitude*Math.cos(f),p=s+c.magnitude*Math.sin(f);if(h>=1){var w=Math.sqrt(Math.pow(m-o,2)+Math.pow(p-s,2));a.moveTo(o,s),a.arc(o,s,w,0,n)}else d.splice(0,d.length);d.push({x:m,y:p}),o=m,s=p}a.strokeStyle="burlywood",a.stroke(),a.beginPath(),a.moveTo(d[0].x,d[0].y);for(var b=1;b<d.length;b++)a.lineTo(d[b].x,d[b].y);a.strokeStyle="red",a.stroke(),d.splice(0,d.length)}else a.beginPath(),function(t,e){for(var n=0,r=0,o=0;o<t;o++){var i=v[o],s=e*i.frequency+i.phase;n+=i.magnitude*Math.cos(s),r+=i.magnitude*Math.sin(s),a.lineTo(n,r)}}(e,r),a.strokeStyle="red",a.stroke();if(y>0){a.beginPath();for(var x=0;x<l;x++)A(e,x*n/l);A(e,0),a.strokeStyle="green",a.stroke()}}function A(t,e){for(var n=0,r=0,o=0;o<t;o++){var i=v[o],s=e*i.frequency+i.phase;n+=i.magnitude*Math.cos(s),r+=i.magnitude*Math.sin(s)}a.lineTo(n,r)}}T.oninput=function(){_=T.checked,E()},window.addEventListener("resize",(function(){k(),E()})),k(),null===(A=window.location.search)||void 0===A||A.substr(1).split("&").forEach((function(t){var e=n(t.split("="),2),r=e[0],o=e[1];if(null!=o)switch(o=o&&decodeURIComponent(o),!0){case"pt"===r:var i=n(o.split(";"),2),a=i[0],s=i[1];null!=a&&null!=s&&P(Number(a),Number(s),!1);break;case"range"===r:b.value=o;break;case"circles"===r:T.checked=Boolean(Number(o));break;case"complexity"===r:x.value=o;break;case"fftsize"===r:l=Number(o),f=new c(l),m=f.createComplexArray(),p=f.createComplexArray()}})),b.max=(l-1).toString(),g=b.valueAsNumber,x.max=(l-1).toString(),y=x.valueAsNumber,_=T.checked,E(),i.onpointerdown=function(t){0===t.button&&(w=!0,i.setPointerCapture(t.pointerId),P(t.offsetX,t.offsetY))},i.ontouchstart=i.ontouchmove=function(t){1===t.touches.length&&(P(t.changedTouches[0].clientX-i.offsetLeft,t.changedTouches[0].clientY-i.offsetTop),t.preventDefault())},i.onpointermove=function(t){w&&P(t.offsetX,t.offsetY)},i.onpointerup=function(t){w&&(w=!1,i.releasePointerCapture(t.pointerId))},document.getElementById("clear-button").onclick=function(){s.splice(0,s.length),h=0,u=new Path2D,v.splice(0,v.length),E()},document.getElementById("save-button").onclick=function(){if(s.length>0&&"URLSearchParams"in window){var t="";s.forEach((function(e){return t+="&pt="+e.x+";"+e.y}));var e=window.location.pathname+"?range="+g+"&complexity="+y+"&circles="+Number(_)+t;history.pushState(null,"",e)}}}();
//# sourceMappingURL=index.3b0ae354.js.map
